
<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>画饼 Piecasso - 别看了，快去赶稿</title>
    
    <!-- PWA Meta Tags & Apple Optimization -->
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="画饼Piecasso">
    <meta name="theme-color" content="#4B5E4F">
    <meta name="format-detection" content="telephone=no">
    
    <!-- Apple Touch Icon - 抽象可爱圆饼图标 -->
    <link rel="apple-touch-icon" href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 180 180'%3E%3Crect width='180' height='180' rx='45' fill='%23F4F1EA'/%3E%3Ccircle cx='90' cy='90' r='60' fill='%23D4A373'/%3E%3Ccircle cx='135' cy='65' r='25' fill='%23F4F1EA'/%3E%3Ccircle cx='70' cy='80' r='6' fill='%23FDFBF7' opacity='0.6'/%3E%3Ccircle cx='95' cy='110' r='8' fill='%234B5E4F'/%3E%3Cpath d='M110 75 Q 120 85 110 95' stroke='%234B5E4F' stroke-width='4' stroke-linecap='round' fill='none'/%3E%3C/svg%3E">
    
    <link rel="manifest" href="manifest.json">
    
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;500;600;700;800&family=Noto+Sans+SC:wght@400;500;700&display=swap" rel="stylesheet">

    <style>
        body { 
            font-family: 'Plus Jakarta Sans', 'Noto Sans SC', sans-serif; 
            -webkit-tap-highlight-color: transparent;
            overscroll-behavior-y: contain;
            background-color: #EAE4D7; /* Updated background color to retro texture */
            color: #2C332D;
            padding-top: env(safe-area-inset-top);
            line-height: 1.6;
            letter-spacing: -0.01em;
        }
        
        .rounded-xl { border-radius: 1rem !important; }
        .rounded-2xl { border-radius: 1.5rem !important; }

        .custom-scrollbar::-webkit-scrollbar { width: 4px; height: 4px; }
        .custom-scrollbar::-webkit-scrollbar-thumb { background: #D6D2C4; border-radius: 10px; }
        
        html { 
          background-color: #4B5E4F; /* Keep the accent color for overscroll/outer edge */ 
          height: 100%; 
          overflow: hidden; 
        }
        body { height: 100%; overflow-y: auto; overflow-x: hidden; }
        
        ::selection { background: #D4A373; color: white; }

        /* Custom shadows for a "baked cookie" feel */
        .card-baked-shadow {
            box-shadow: 0px 8px 24px rgba(0, 0, 0, 0.06), 0px 2px 8px rgba(0, 0, 0, 0.03);
        }
        .card-baked-subtle-shadow {
            box-shadow: 0px 4px 16px rgba(0, 0, 0, 0.04), 0px 1px 4px rgba(0, 0, 0, 0.02);
        }

        /* Global Drag & Drop Styles (Enhanced) */
        /* These styles are no longer needed for drag-and-drop, but keeping them as they might be generic for active/over states if re-purposed */
        .drag-active {
          opacity: 0.4; 
          transform: scale(1.05) rotate(2deg); 
          box-shadow: 0px 16px 48px rgba(0, 0, 0, 0.2), 0px 4px 16px rgba(0, 0, 0, 0.1); 
          border-color: #D4A373 !important; 
          z-index: 1000; 
          transition: transform 0.2s ease-out, opacity 0.2s ease-out, box-shadow 0.2s ease-out; 
        }
        .drag-over-target {
          border-width: 3px !important; 
          border-style: dashed !important;
          border-color: #D4A373 !important;
          background-color: #D4A37320 !important; 
          transition: background-color 0.2s ease-in-out, border-color 0.2s ease-in-out, border-width 0.2s ease-in-out;
        }

        /* Toggle Switch Styles - Moved from SettingsView.tsx */
        .toggle-switch {
          position: relative;
          display: inline-block;
          width: 50px; /* Adjusted width */
          height: 28px; /* Adjusted height */
        }
        .toggle-switch input {
          opacity: 0;
          width: 0;
          height: 0;
        }
        .toggle-slider {
          position: absolute;
          cursor: pointer;
          top: 0;
          left: 0;
          right: 0;
          bottom: 0;
          background-color: #ccc;
          transition: .4s;
          border-radius: 28px; /* Adjusted border-radius */
        }
        .toggle-slider:before {
          position: absolute;
          content: "";
          height: 20px; /* Adjusted height */
          width: 20px; /* Adjusted width */
          left: 4px;
          bottom: 4px;
          background-color: white;
          transition: .4s;
          border-radius: 50%;
        }
        input:checked + .toggle-slider {
          background-color: #4B5E4F;
        }
        input:focus + .toggle-slider {
          box-shadow: 0 0 1px #4B5E4F;
        }
        input:checked + .toggle-slider:before {
          transform: translateX(22px); /* Adjusted translation */
        }
    </style>
<script type="importmap">
{
  "imports": {
    "react": "https://esm.sh/react@^19.2.3",
    "react-dom/": "https://esm.sh/react-dom@^19.2.3/",
    "react/": "https://esm.sh/react@^19.2.3/",
    "@google/genai": "https://esm.sh/@google/genai@^1.34.0",
    "lucide-react": "https://esm.sh/lucide-react@^0.562.0",
    "date-fns": "https://esm.sh/date-fns@^3.6.0",
    "date-fns/": "https://esm.sh/date-fns@^3.6.0/",
    "recharts": "https://esm.sh/recharts@^3.6.0",
    "vite": "https://esm.sh/vite@^7.3.0",
    "@vitejs/plugin-react": "https://esm.sh/@vitejs/plugin-react@^5.1.2",
    "xlsx": "https://esm.sh/xlsx@0.18.5",
    "marked": "https://esm.sh/marked@^12.0.2"
  }
}
</script>
</head>
<body>
    <div id="root"></div>
    <script type="module" src="index.tsx"></script>
</body>
</html>